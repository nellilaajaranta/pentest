Tero Karvisen [Tunkeutumistestaus 2023-kurssin](https://terokarvinen.com/2023/tunkeutumistestaus-2023-kevat/) h5-tehtäväraporttini.

### x) Lue ja tiivistä (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)

    Karvinen 2022: Cracking Passwords with Hashcat
    Karvinen 2023: Crack File Password With John
    Karvinen 2023: Find Hidden Web Directories - Fuzz URLs with ffuf

### y) The SUPER ultimate Hakk3r Che33tsheet 0.0.1. Tee tiivistelmä omista ja kavereiden parhaista tunketumistekniikoista. Ole täsmällinen, liitä komennot mukaan. Tämän kohdan vastaus lienee pidempi kuin aiempien x-tehtävien. Viittaa lähteisiin. Tässä alakohdassa ei tarvitse ajaa komentoja tietokoneella.
### a) Asenna Hashcat ja testaa sen toiminta murtamalla esimerkkisalasana.

Apuna [Tero Karvisen ohje "Cracking Passwords with Hashcat"](https://terokarvinen.com/2022/cracking-passwords-with-hashcat/)

Asennus komennolla:

`sudo apt-get -y install hashid hashcat wget`

![hashcat1]()

Hashcat olikin jo asennettuna valmiiksi Kaliin. Seuraavaksi loin uuden hakemiston "hashed" ja menin siihen:

`mkdir hashed`
`cd hashed`

Seuraavaksi latasin "sanakirjan" komennolla:

`wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz`

Ladatun paketin purkaminen:

`tar xf rockyou.txt.tar.gz`

Ladatun paketin poisto:

`rm rockyou.txt.tar.gz`

![hashcat2]()

Kokeilin purkaa ohjeessa ollutta hashia komennolla

`hashcat -m 0 '6b1628b016dff46e6fa35684be6acc96' rockyou.txt -o solved`

![hashcat3]()

^ hashcat toiminnassa

![hashcat4]()

### b) Salainen, mutta ei multa. Ratkaise dirfuzt-1 artikkelista Karvinen 2023: Find Hidden Web Directories - Fuzz URLs with ffuf

Latasin [dirfuzt-1:n Tero Karvisen ohjeesta](https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/) ja annoin ladatulle tiedostolle oikeudet `chmod u+x dirfuzt-1`

Latasin seuraavaksi ffuf:n:

`wget https://github.com/ffuf/ffuf/releases/download/v2.0.0/ffuf_2.0.0_linux_amd64.tar.gz`

Purin ladatun tiedoston:

`tar -xf ffuf_2.0.0_linux_amd64.tar.gz`

Seuraavaksi asensin sanakirjan:

`wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/common.txt`

Tämän jälkeen otin internet-yhteyden pois käytöstä.

seuraavaksi ajoin komennon:

`./ffuf -w common.txt -u http://127.0.0.2:8000/FUZZ`

Tällä löytyi lähes 5000 tulosta, ja suurin osa palauttaa webbisivulla tyhjää. Suurin osa tiedostoista on kooltaan 154, joten ne filtteröidään pois Filtteröinti tiedoston koon mukaan

`./ffuf -w common.txt -u http://127.0.0.2:8000/FUZZ -fs 154`

Seuraavaksi testasin tuloksia ja .git sekä wp-admin olivat oikeat hakemistot:

![dirfuzt]()

### c) Asenna John the Ripper ja testaa sen toiminta murtamalla jonkin esimerkkitiedoston salasana.

Tehtävän tukena käytin Tero Karvisen ohjetta [Crack File Password With John](https://terokarvinen.com/2023/crack-file-password-with-john/), josta komennot ovat peräisin

Ensimmäiseksi asensin John the ripperin käyttöä tukevia työkaluja seuraavalla komennolla:

`sudo apt-get -y install micro bash-completion git build-essential libssl-dev zlib1g zlib1g-dev zlib-gst libbz2-1.0 libbz2-dev atool zip wget`

---

Seuraavaksi asensin John the ripper Jumbo version komennolla:

`git clone --depth=1 https://github.com/openwall/john.git`

Seuraavaksi menin sijaintiin `cd john/src/` ja suoritin scriptin `./configure` , joka tunnistaa käytettävän ympäristön ja luo "makefilen" `make` -komennolle. Tässä kohtaa saa varoituksen mikäli jokin riippvuuus puuttuu - jotain puutteita oli mutta päätin silti edetä tehtävässä ennen niiden asennusta.

Seuraavaksi ajoin kuvassa näkyvän komennon:

`make -s clean && make -sj4`

Sen jälkeen menin sijaintiin /john/run/ ja suoritin Johnin:

![john2]()

Sitten latasin Tero Karvisen luoman esimerkki-zip-filen, joka tulee koittaa avata.

`wget https://TeroKarvinen.com/2023/crack-file-password-with-john/tero.zip`

Yritin sitten unzipata tiedoston, mutta se ei ole mahdollista salasanasuojauksen vuoksi.

![john3]()

Seuraavaksi zip-tiedostosta pitää luoda hash-tiedosto:

`zip2john tero.zip >tero.zip.hash`

Sitten käytin John-työkalua hashiin:

`john tero.zip.hash `

![john4]()

Kuvasta näkyy, että salasana olisi "butterfly". Sain zipin sillä auki ja tarkasteltua sen sisältöä.

![john5]()


### d) Jurpon sivut. Ohhoh, sieppasit juuri Jurpon Windowsista NTLM-tiivisteen 83f1cf89225005caeb4e52c9ea9b00e0 . Liitteenä Jurpon kotisivulta leikattu ja liimattu teksti. Tee oma hyökkäyssanakirja ja murra tiiviste myöhempää liikkumista (lateral movement) varten.
### e) Valitse 2: Ratkaise kaksi itse valitsemaasi tehtävää PortSwigger labs -sivulta. Tietysti sellaisia, jotka eivät ole olleet vielä läksynä.
